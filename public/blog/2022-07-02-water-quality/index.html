<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title> Water quality - Sergio Lopez Olvera | Data Scientist </title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="referrer" content="no-referrer">
    <meta name="description" content="Description for the page" />
    <meta property="og:site_name" content="Sergio Lopez Olvera | Data Scientist" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://sergiolopezolvera.netlify.app/blog/2022-07-02-water-quality/" />
    <meta property="og:title" content="Water quality" />
    <meta property="og:image" content="https://sergiolopezolvera.netlify.app/images/image.png" />
    <meta property="og:description" content="Description for the page" />

    <meta name="twitter:card" content="summary_large_image" />
    
    <meta name="twitter:title" content="Water quality" />
    <meta name="twitter:description" content="Description for the page" />
    <meta name="twitter:image" content="https://sergiolopezolvera.netlify.app/images/image.png" />

    <link rel="canonical" href="https://sergiolopezolvera.netlify.app/blog/2022-07-02-water-quality/">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin="anonymous" />

    <link rel="stylesheet" href="https://sergiolopezolvera.netlify.app/css/custom.css" />

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github-gist.min.css" integrity="sha512-od7JLoOTxM8w/HSKGzP9Kexc20K9p/M2zxSWsd7H1e4Ctf+8SQFtCWEZnW5u6ul5ehSECa5QmOk9ju2nQMmlVA==" crossorigin="anonymous" />
    

    

    <link rel="shortcut icon"
        href="https://sergiolopezolvera.netlify.app/images/favicon.png">

    
    <link href="https://sergiolopezolvera.netlify.app/index.xml" rel="alternate" type="application/rss+xml" title="Sergio Lopez Olvera | Data Scientist" />
    
</head>

<body>
    
<div class="mt-xl header">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-auto">
                <a href="https://sergiolopezolvera.netlify.app/">
                    <h1 class="name">Sergio López Olvera | Data Scientist</h1>
                </a>
            </div>
        </div>

        <div class="row justify-content-center">
            <ul class="nav nav-primary">
                
                <li class="nav-item">
                    <a class="nav-link" href="https://sergiolopezolvera.netlify.app/">
                        
                        Portfolio
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="https://sergiolopezolvera.netlify.app/resume/">
                        
                        Resume
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="https://sergiolopezolvera.netlify.app/certificates/">
                        
                        Certificates
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="https://github.com/sergiolopezolvera">
                        
                        GitHub
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="https://linkedin.com/in/sergiolopezolvera">
                        
                        LinkedIn
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

<div class="content">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-sm-12 col-lg-8">
                <h1 class="mx-0 mx-md-4 blog-post-title">Water quality</h1>

                <div class="mb-md-4 meta">
                    
                    
                    <span class="author" title="Sergio Lopez Olvera">
                        Sergio Lopez Olvera
                    </span>
                    
                    

                    <span class="date middot" title='Sat Jul 2 2022 00:00:00 UTC'>
                        2022-07-02
                    </span>

                    <span class="reading-time middot">
                        3 min read
                    </span>

                    <div class="d-none d-md-inline tags">
                        <ul class="list-unstyled d-inline">
                            
                            <li class="d-inline middot">
                                <a href="https://sergiolopezolvera.netlify.app/tags/ggplot2">ggplot2</a>
                            </li>
                            
                            <li class="d-inline middot">
                                <a href="https://sergiolopezolvera.netlify.app/tags/cleaning">cleaning</a>
                            </li>
                            
                            <li class="d-inline middot">
                                <a href="https://sergiolopezolvera.netlify.app/tags/tidy">tidy</a>
                            </li>
                            
                            <li class="d-inline middot">
                                <a href="https://sergiolopezolvera.netlify.app/tags/water">water</a>
                            </li>
                            
                            <li class="d-inline middot">
                                <a href="https://sergiolopezolvera.netlify.app/tags/wrangling">wrangling</a>
                            </li>
                            
                            <li class="d-inline middot">
                                <a href="https://sergiolopezolvera.netlify.app/tags/plot">plot</a>
                            </li>
                            
                            <li class="d-inline middot">
                                <a href="https://sergiolopezolvera.netlify.app/tags/quality">quality</a>
                            </li>
                            
                        </ul>
                    </div>
                </div>

                <div class="markdown blog-post-content">
                    
    


<div id="data-import" class="section level1">
<h1>Data import</h1>
<p>Imported data from local databases related to water quality of three rivers in the watershed and mexican and international standards. The next tibble is an example of the raw imported data.</p>
<pre><code>## # A tibble: 6 x 73
##   Año          `2005...2` `2005...3` `2005...4` `2005...5` `2006...6` `2006...7`
##   &lt;chr&gt;        &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;     
## 1 Fecha        28/01/05   12/04/05   28/07/05   11/10/05   12/01/06   07/04/06  
## 2 pH    In si~ 7.60       7.05       7.40       6.65       7.79       6.83      
## 3 Temperatura~ 13.50      13.00      16.00      16.00      12.50      18.00     
## 4 Temperatura~ &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       25.70      24.00     
## 5 Materia Flo~ ausente    ausente    ausente    ausente    &lt;NA&gt;       &lt;NA&gt;      
## 6 Olor         &lt;NA&gt;       ausente    ausente    ausente    &lt;NA&gt;       Inoloro   
## # ... with 66 more variables: `2006...8` &lt;chr&gt;, `2006...9` &lt;chr&gt;,
## #   `2007...10` &lt;chr&gt;, `2007...11` &lt;chr&gt;, `2007...12` &lt;chr&gt;, `2007...13` &lt;chr&gt;,
## #   `2008...14` &lt;chr&gt;, `2008...15` &lt;chr&gt;, `2008...16` &lt;chr&gt;, `2008...17` &lt;chr&gt;,
## #   `2009...18` &lt;chr&gt;, `2009...19` &lt;chr&gt;, `2009...20` &lt;chr&gt;, `2009...21` &lt;chr&gt;,
## #   `2010...22` &lt;chr&gt;, `2010...23` &lt;chr&gt;, `2010...24` &lt;chr&gt;, `2010...25` &lt;chr&gt;,
## #   `2011...26` &lt;chr&gt;, `2011...27` &lt;chr&gt;, `2011...28` &lt;chr&gt;, `2011...29` &lt;chr&gt;,
## #   `2012...30` &lt;chr&gt;, `2012...31` &lt;chr&gt;, `2012...32` &lt;chr&gt;, ...</code></pre>
</div>
<div id="data-cleaning-and-wrangling" class="section level1">
<h1>Data cleaning and wrangling</h1>
<p>Pivoted some columns into rows , filtered out NAs, formatted dates into dmy, trimmed strings and replaces two or more white spaces with a single one. The next tibble is the previous example transformed into a tidy format.</p>
<pre><code>## # A tibble: 6 x 6
##   Parametro     Fecha    Value Dam   Date       Parameter 
##   &lt;chr&gt;         &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;date&gt;     &lt;chr&gt;     
## 1 pH    In situ 28/01/05  7.6  Dam 3 2005-01-28 pH In situ
## 2 pH    In situ 12/04/05  7.05 Dam 3 2005-04-12 pH In situ
## 3 pH    In situ 28/07/05  7.4  Dam 3 2005-07-28 pH In situ
## 4 pH    In situ 11/10/05  6.65 Dam 3 2005-10-11 pH In situ
## 5 pH    In situ 12/01/06  7.79 Dam 3 2006-01-12 pH In situ
## 6 pH    In situ 07/04/06  6.83 Dam 3 2006-04-07 pH In situ</code></pre>
</div>
<div id="data-visualization" class="section level1">
<h1>Data visualization</h1>
<p>Binded the water quality data frames with the national and international standards to identify those pollutants which exceeded the limits.</p>
<p>The next figure shows the pollutants that have exceeded the World Health Organization standards. To achieve that it was necessary to normalize data to a 0 to 1 scale and then transform the y axis to a log10 scale for readability.</p>
<p><img src="https://sergiolopezolvera.netlify.app/blog/2022-07-02-water-quality/index_files/figure-html/oms-1.png" width="672" /></p>
<p>From the previous figure concluded that both Pb and Cd exceeded the WHO standards on several occasions</p>
<p>Then coded a similar process to identify those pollutants that exceeded SEMARNAT`s ecological criteria for drinking water, as shown in the next figure.</p>
<p><img src="https://sergiolopezolvera.netlify.app/blog/2022-07-02-water-quality/index_files/figure-html/cri-eco-1.png" width="672" /></p>
<p>The previous figure shows that Cd, HCN, Pb, Cr and fecal coliforms have exceeded the ecological criteria for drinking water.</p>
</div>



                </div>

                
            </div>
        </div>
    </div>
</div>

<section id="comments">
    <div class="py-3 content">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-sm-12 col-lg-8">
                    <div class="comments">
                        <script src="https://utteranc.es/client.js" repo=""
                            issue-term="pathname" label="comment" theme="github-light" crossorigin="anonymous" async>
                            </script>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>



    

    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js" integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin="anonymous"></script>
        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js" defer></script>
        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/python.min.js" defer></script>
        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/stan.min.js" defer></script>
        
        <script>
            window.addEventListener('load', function() {
                hljs.initHighlighting();
            }, true);
        </script>
    

    

    
    
        

    
</body>

</html>
